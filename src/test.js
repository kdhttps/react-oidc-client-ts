const github_tree = {
  "sha": "65ab295f9ba68651653d164df2337147d928f9e6",
  "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/65ab295f9ba68651653d164df2337147d928f9e6",
  "tree": [
    {
      "path": "LICENSE",
      "mode": "100644",
      "type": "blob",
      "sha": "261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64",
      "size": 11357,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64"
    },
    {
      "path": "README.md",
      "mode": "100644",
      "type": "blob",
      "sha": "e2657da8f2aa852c5cc3574d324a321b1ff052d3",
      "size": 17,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e2657da8f2aa852c5cc3574d324a321b1ff052d3"
    },
    {
      "path": "ads.json",
      "mode": "100644",
      "type": "blob",
      "sha": "5fdc6f90538f2dcb18cbb58d4241b6a054ff6bd0",
      "size": 385,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/5fdc6f90538f2dcb18cbb58d4241b6a054ff6bd0"
    },
    {
      "path": "projects",
      "mode": "040000",
      "type": "tree",
      "sha": "961027902161972b305de6871c9861b9d72a14cc",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/961027902161972b305de6871c9861b9d72a14cc"
    },
    {
      "path": "projects/first-project",
      "mode": "040000",
      "type": "tree",
      "sha": "e3ff7a1da5ec7efdec1289a1655aa449f8416119",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/e3ff7a1da5ec7efdec1289a1655aa449f8416119"
    },
    {
      "path": "projects/first-project/LICENSE",
      "mode": "100644",
      "type": "blob",
      "sha": "261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64",
      "size": 11357,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64"
    },
    {
      "path": "projects/first-project/README.md",
      "mode": "100644",
      "type": "blob",
      "sha": "bb4c07620154204c2dbaa6f8266a1355d019b235",
      "size": 20,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/bb4c07620154204c2dbaa6f8266a1355d019b235"
    },
    {
      "path": "projects/first-project/code",
      "mode": "040000",
      "type": "tree",
      "sha": "04ed1e429ef5f9e8edd834e1762920857dc2530d",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/04ed1e429ef5f9e8edd834e1762920857dc2530d"
    },
    {
      "path": "projects/first-project/code/io.acme.agama.pw.flow",
      "mode": "100644",
      "type": "blob",
      "sha": "6466d086e20269dc3a28a0e3ae6ce0ad5a3f4e15",
      "size": 226,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/6466d086e20269dc3a28a0e3ae6ce0ad5a3f4e15"
    },
    {
      "path": "projects/first-project/code/io.acme.agama.sms.flow",
      "mode": "100644",
      "type": "blob",
      "sha": "91812b0394eeeeee56680de5dc9e1498c32f73c6",
      "size": 206,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/91812b0394eeeeee56680de5dc9e1498c32f73c6"
    },
    {
      "path": "projects/first-project/lib",
      "mode": "040000",
      "type": "tree",
      "sha": "8dd0216149dc67ab3701046fecadcb58adbda7f6",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/8dd0216149dc67ab3701046fecadcb58adbda7f6"
    },
    {
      "path": "projects/first-project/lib/myProject.groovy",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/first-project/lib/myProject.jar",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/first-project/web",
      "mode": "040000",
      "type": "tree",
      "sha": "9195a0b98b0ed136dbb2b5fd7627ce8e40ce153b",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/9195a0b98b0ed136dbb2b5fd7627ce8e40ce153b"
    },
    {
      "path": "projects/first-project/web/acme.css",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/first-project/web/acme.js",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/first-project/web/password",
      "mode": "040000",
      "type": "tree",
      "sha": "d4a4bc9c36f88d9f8f4152ef46da65cde761b49d",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/d4a4bc9c36f88d9f8f4152ef46da65cde761b49d"
    },
    {
      "path": "projects/first-project/web/password/password.ftlh",
      "mode": "100644",
      "type": "blob",
      "sha": "0b9544b2be11360954e2f2a38e92bab7f2be7fc4",
      "size": 3607,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/0b9544b2be11360954e2f2a38e92bab7f2be7fc4"
    },
    {
      "path": "projects/first-project/web/password/username.ftlh",
      "mode": "100644",
      "type": "blob",
      "sha": "b06520d9511daa3f4ba21d7c716b36830266d201",
      "size": 3613,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/b06520d9511daa3f4ba21d7c716b36830266d201"
    },
    {
      "path": "projects/first-project/web/sms",
      "mode": "040000",
      "type": "tree",
      "sha": "ab1b8f931e34579e5bc613cc240769b2290ec15b",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/ab1b8f931e34579e5bc613cc240769b2290ec15b"
    },
    {
      "path": "projects/first-project/web/sms/sms.ftlh",
      "mode": "100644",
      "type": "blob",
      "sha": "a45b4784a67f3aab6dd6d7c72e78fd24e23ec6a4",
      "size": 3320,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/a45b4784a67f3aab6dd6d7c72e78fd24e23ec6a4"
    },
    {
      "path": "projects/second-project",
      "mode": "040000",
      "type": "tree",
      "sha": "3b72ab2861b5a73a8c2025c367190e1684fecff5",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/3b72ab2861b5a73a8c2025c367190e1684fecff5"
    },
    {
      "path": "projects/second-project/LICENSE",
      "mode": "100644",
      "type": "blob",
      "sha": "261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64",
      "size": 11357,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64"
    },
    {
      "path": "projects/second-project/README.md",
      "mode": "100644",
      "type": "blob",
      "sha": "75213d053a030cbf2090f58875b9754694d40c92",
      "size": 21,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/75213d053a030cbf2090f58875b9754694d40c92"
    },
    {
      "path": "projects/second-project/code",
      "mode": "040000",
      "type": "tree",
      "sha": "04ed1e429ef5f9e8edd834e1762920857dc2530d",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/04ed1e429ef5f9e8edd834e1762920857dc2530d"
    },
    {
      "path": "projects/second-project/code/io.acme.agama.pw.flow",
      "mode": "100644",
      "type": "blob",
      "sha": "6466d086e20269dc3a28a0e3ae6ce0ad5a3f4e15",
      "size": 226,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/6466d086e20269dc3a28a0e3ae6ce0ad5a3f4e15"
    },
    {
      "path": "projects/second-project/code/io.acme.agama.sms.flow",
      "mode": "100644",
      "type": "blob",
      "sha": "91812b0394eeeeee56680de5dc9e1498c32f73c6",
      "size": 206,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/91812b0394eeeeee56680de5dc9e1498c32f73c6"
    },
    {
      "path": "projects/second-project/lib",
      "mode": "040000",
      "type": "tree",
      "sha": "8dd0216149dc67ab3701046fecadcb58adbda7f6",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/8dd0216149dc67ab3701046fecadcb58adbda7f6"
    },
    {
      "path": "projects/second-project/lib/myProject.groovy",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/second-project/lib/myProject.jar",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/second-project/web",
      "mode": "040000",
      "type": "tree",
      "sha": "5df87162a8095d9e8e23eee87bb05f2d6df93a7b",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/5df87162a8095d9e8e23eee87bb05f2d6df93a7b"
    },
    {
      "path": "projects/second-project/web/acme.css",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/second-project/web/acme.js",
      "mode": "100644",
      "type": "blob",
      "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
      "size": 0,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"
    },
    {
      "path": "projects/second-project/web/password",
      "mode": "040000",
      "type": "tree",
      "sha": "7546cdc6f5d8b87519cc9c98f7f2fcdf8ebfd41f",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/7546cdc6f5d8b87519cc9c98f7f2fcdf8ebfd41f"
    },
    {
      "path": "projects/second-project/web/password/password.ftlh",
      "mode": "100644",
      "type": "blob",
      "sha": "e536d1143d88338e69d1105bb3a8c4345c721d36",
      "size": 3609,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/e536d1143d88338e69d1105bb3a8c4345c721d36"
    },
    {
      "path": "projects/second-project/web/password/username.ftlh",
      "mode": "100644",
      "type": "blob",
      "sha": "8e0652b6cdf8252bd58da244d10efcb7a0e8561c",
      "size": 3616,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/8e0652b6cdf8252bd58da244d10efcb7a0e8561c"
    },
    {
      "path": "projects/second-project/web/sms",
      "mode": "040000",
      "type": "tree",
      "sha": "ab1b8f931e34579e5bc613cc240769b2290ec15b",
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/trees/ab1b8f931e34579e5bc613cc240769b2290ec15b"
    },
    {
      "path": "projects/second-project/web/sms/sms.ftlh",
      "mode": "100644",
      "type": "blob",
      "sha": "a45b4784a67f3aab6dd6d7c72e78fd24e23ec6a4",
      "size": 3320,
      "url": "https://api.github.com/repos/kdhttps/my-ads-projects/git/blobs/a45b4784a67f3aab6dd6d7c72e78fd24e23ec6a4"
    }
  ],
  "truncated": false
}

const flattenTreeData = [
  {
    id: 0,
    name: "first-project",
    children: [],
    parent: null
  }
]

export const getFlatTree = () => {
  github_tree.tree.forEach((tree, index) => {
    const newNodeIndex = index + 1

    // set id
    const node = {
      id: newNodeIndex,
      ...tree
    }

    const paths = tree.path.split("/")

    if (paths.length > 1){
      // set name
      node.name = paths.pop()

      // set parent
      // projects/first-project/LICENSE
      const secondLastNodePath = paths.join("/")
      const parentNodeIndex = flattenTreeData.findIndex(parentTree => parentTree.path === secondLastNodePath)
      node.parent = flattenTreeData[parentNodeIndex].id

      // set children of parent
      if (flattenTreeData[parentNodeIndex].children) {
        flattenTreeData[parentNodeIndex].children.push(newNodeIndex)
      } else {
        flattenTreeData[parentNodeIndex].children = [ newNodeIndex ]
      }
    } else {
      node.name = paths[0]
      node.parent = 0
      flattenTreeData[0].children.push(newNodeIndex)
    }

    flattenTreeData.push(node)
  })

  return flattenTreeData
}
